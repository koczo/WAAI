@using Blazilla
@typeparam TStep where TStep : Ardalis.SmartEnum.SmartEnum<TStep>

<Card>
    @if (ShowProgressStepper)
    {
        <ProgressStepper TStep="TStep" CurrentStep="CurrentStep"/>
    }

    <EditForm EditContext="_editContext" OnValidSubmit="NextStep">
        <FluentValidator/>
        @StepContent
    </EditForm>

    <div class="flex @(IsFirstStep() ? "justify-end" : "justify-between") mt-8 pt-6 border-t border-gray-200">
        <Button OnClick="PreviousStep"
                Visible="@(!IsFirstStep())"
                Variant="Button.ButtonVariant.Secondary">
            ← Previous
        </Button>

        @if (!IsLastStep())
        {
            <Button OnClick="HandleNext" Variant="Button.ButtonVariant.Primary">
                Next →
            </Button>
        }
        else
        {
            <Button OnClick="OnComplete" Variant="Button.ButtonVariant.Success">
                @CompleteButtonText
            </Button>
        }
    </div>
</Card>
